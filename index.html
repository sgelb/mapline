<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Mapline</title>
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.css"
      integrity="sha384-4hP1P/do8K97TrJzFuyXHddOxt7y5RRoqAy0xvJwzNxU1PpdoKW59vVYN432p2W0"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="./css/style.css" />
  </head>

  <body>
    <div class="container-fluid">
      <header>
        <h1>
          <a href="/">Mapline. </a
          ><small data-trn="subtitle" class="text-muted"></small>
        </h1>
      </header>

      <noscript>
        <div
          data-trn="msg_js_required"
          class="alert alert-danger"
          role="alert"
        ></div>
      </noscript>

      <!-- alert/error box -->
      <div
        class="alert alert-danger alert-dismissible hidden"
        id="alertbox"
        role="alert"
      >
        <button type="button" class="close" aria-hidden="true">&times;</button>
        <div id="alert-msg"></div>
      </div>

      <!-- main content -->
      <div id="main" class="row">
        <!-- user input -->
        <section class="col-md-3">
          <form id="config">
            <!-- track file input -->
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label data-trn="track" for="trackFile"></label>
                  <a
                    data-trn="example"
                    href="#"
                    class="small float-right"
                    id="example-gpx"
                  ></a>

                  <!-- Show open file button -->
                  <label
                    id="trackBtn"
                    class="input-group hidable"
                    for="trackFile"
                  >
                    <!-- FIXME: focus button and open file dialog using keys -->
                    <span
                      class="btn btn-primary btn-block"
                      data-trn="open_file"
                    >
                      <input
                        type="file"
                        class="hidden"
                        id="trackFile"
                        accept=".geojson,.gpx,.kml"
                      />
                    </span>
                  </label>

                  <!-- or chosen track name and remove track button -->
                  <div id="trackField" class="hidable hidden input-group">
                    <input
                      type="text"
                      id="trackFileName"
                      class="form-control"
                      readonly
                    />
                    <div id="remove-track" class="input-group-append">
                      <div class="input-group-text close">&times;</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- track details -->
            <div id="trackDetails" class="row hidable hidden">
              <div class="col-md-12">
                <!-- <label>Details</label> -->
                <table id="trackDetailsTable" class="table table-sm"></table>
              </div>
            </div>

            <!-- map styles -->
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label for="style" data-trn="map_style"></label>
                  <select id="style" class="form-control">
                    <option value="outdoors">Outdoors</option>
                    <option value="bright">Bright</option>
                    <option value="dark">Dark</option>
                    <option value="light">Light</option>
                    <option value="streets">Streets</option>
                    <option value="satellite">Satellite</option>
                    <option value="satellite-streets">Satellite Streets</option>
                    <option value="navigation-guidance-day">
                      Navigation Guidance Day
                    </option>
                    <option value="navigation-guidance-night">
                      Navigation Guidance Night
                    </option>
                  </select>
                </div>
              </div>
            </div>

            <!-- map scale -->
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label for="scale" data-trn="scale"></label>
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <div class="input-group-text">1:</div>
                    </div>
                    <input
                      id="scale"
                      type="number"
                      class="form-control disableable"
                      disabled
                      min="5000"
                      step="1000"
                      value="75000"
                    />
                  </div>
                  <div class="form-control-feedback small hidden"></div>
                </div>
              </div>
            </div>

            <!-- PDF format -->
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label for="paperformat" data-trn="pdf_format"></label>
                  <select
                    id="paperformat"
                    class="form-control disableable"
                    disabled
                  >
                    <option value="a5" selected>A5</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- tabs bar -->
            <div id="collapse-group">
              <div class="row">
                <div class="col-md-12">
                  <p>
                    <button
                      class="btn btn-outline-secondary btn-sm collapsed"
                      type="button"
                      data-toggle="collapse"
                      data-target="#pois"
                      aria-expanded="false"
                      aria-controls="pois"
                      data-trn="pois"
                    ></button>
                    <button
                      class="btn btn-outline-secondary btn-sm collapsed"
                      type="button"
                      data-toggle="collapse"
                      data-target="#advanced"
                      aria-expanded="false"
                      aria-controls="advanced"
                      data-trn="advanced"
                    ></button>
                  </p>
                </div>
              </div>

              <!-- POIs tab -->
              <div class="collapse" id="pois" data-parent="#collapse-group">
                <!-- toggle waypoints -->
                <div class="form-group">
                  <div class="form-check form-check-inline">
                    <input
                      id="showWaypoints"
                      type="checkbox"
                      class="form-check-input disableable"
                      disabled
                      checked
                    />
                    <label
                      class="form-check-label"
                      for="showWaypoints"
                      data-trn="show_waypoints"
                    ></label>
                  </div>
                </div>

                <div class="dropdown-divider"></div>

                <p class="poi" data-trn="pois_header"></p>

                <!-- download via turbo overpass -->
                <div class="form-group" id="overpass">
                  <!-- filled in index.js -->
                </div>
              </div>

              <!-- Advanced content -->
              <div class="collapse" id="advanced" data-parent="#collapse-group">
                <!-- distance marker interval -->
                <div class="form-group">
                  <label for="milemarkers" data-trn="milemarkers"></label>
                  <div class="input-group">
                    <input
                      id="milemarkers"
                      type="number"
                      class="form-control disableable"
                      disabled
                      min="0"
                      value="10"
                    />
                    <div class="input-group-append">
                      <div class="input-group-text">km</div>
                    </div>
                  </div>
                  <div class="form-control-feedback small hidden"></div>
                </div>

                <!-- map margin -->
                <div class="form-group">
                  <label for="margin" data-trn="margin"></label>
                  <div class="input-group">
                    <input
                      id="margin"
                      type="number"
                      class="form-control disableable"
                      disabled
                      min="0"
                      value="10"
                    />
                    <div class="input-group-append">
                      <div class="input-group-text">mm</div>
                    </div>
                  </div>
                  <div class="form-control-feedback small hidden"></div>
                </div>

                <!-- track padding -->
                <div class="form-group">
                  <label for="padding" data-trn="padding"></label>
                  <div class="input-group">
                    <input
                      id="padding"
                      type="number"
                      class="form-control disableable"
                      disabled
                      min="0"
                      value="10"
                    />
                    <div class="input-group-append">
                      <div class="input-group-text">mm</div>
                    </div>
                  </div>
                  <div class="form-control-feedback small hidden"></div>
                </div>

                <!-- pdf resolution -->
                <div class="form-group">
                  <label for="dpi" data-trn="dpi"></label>
                  <div class="input-group">
                    <input
                      id="dpi"
                      type="number"
                      class="form-control disableable"
                      disabled
                      min="0"
                      value="300"
                    />
                    <div class="input-group-append">
                      <div class="input-group-text">dpi</div>
                    </div>
                  </div>
                  <div class="form-control-feedback small hidden"></div>
                </div>

                <!-- track width -->
                <div class="form-group">
                  <label for="trackWidth" data-trn="track_width"></label>
                  <div class="input-group">
                    <input
                      id="trackWidth"
                      type="number"
                      class="form-control disableable"
                      disabled
                      min="1"
                      value="3"
                    />
                    <div class="input-group-append">
                      <div class="input-group-text">px</div>
                    </div>
                  </div>
                  <div class="form-control-feedback small hidden"></div>
                </div>

                <!-- track color -->
                <div class="form-group">
                  <label for="trackColor" data-trn="track_color"></label>
                  <div class="input-group">
                    <input
                      id="trackColor"
                      type="color"
                      class="form-control disableable"
                      value="#ff69b4"
                      disabled
                    />
                  </div>
                  <div class="form-control-feedback small hidden"></div>
                </div>
              </div>
            </div>
          </form>

          <!-- generate button -->
          <div class="row">
            <div class="col-md-12">
              <button
                type="submit"
                class="btn btn-primary btn-block disableable"
                id="generate-btn"
                disabled
                data-trn="generate"
              ></button>
            </div>
          </div>
        </section>

        <!-- preview map view -->
        <section class="col-md-9">
          <div id="map"></div>
          <div id="credits" class="float-right small text-muted">
            <a href="https://github.com/sgelb">Made by <em>sgelb&nearr;</em></a>
            (v__VERSION__)
          </div>
        </section>
      </div>
    </div>

    <!-- modal window for pdf generation progress -->
    <div class="modal-overlay hidden" id="modal-overlay"></div>
    <div class="modal row hidden" id="modal">
      <div class="modal-body col-md-12">
        <h3 data-trn="generating_pdf"></h3>
        <div id="progress-text" data-trn="initializing"></div>
        <div class="progress">
          <div
            class="progress-bar progress-bar-striped progress-bar-animated"
            id="progress-bar"
            style="width: 0%"
          ></div>
        </div>
        <button
          class="btn btn-danger float-right"
          id="cancel-button"
          data-trn="cancel"
        ></button>
      </div>
    </div>

    <!-- high-res map sheets are rendered here -->
    <div id="hidden-map-container">
      <div id="hidden-map"></div>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>

    <!-- <script -->
    <!--   src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" -->
    <!--   integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" -->
    <!--   crossorigin="anonymous" -->
    <!-- ></script> -->

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
      integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
      crossorigin="anonymous"
    ></script>

    <script type="text/javascript" src="./src/index.js"></script>
  </body>
</html>
